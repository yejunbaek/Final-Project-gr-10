#move key and stamina boost to food not in item
import random
import time
#again var
again = True
#entry var
entry = 1 
#code key var
code = random.randint(100000,999999)
code = str(code)
#esape code var
escapecode = random.randint(100000,999999)
escapecode = str(escapecode)

#ending the game var
end = False
#stamina and timer var
stamina = 50
timer = 18000
#backpack var
backpack = []
codesheetbackpack = []
codedescramblerbackpack = []
ladderbackpack = []
keybackpack = []
escapecodebackpack = []
#time var
hour = [600,600,600,600,1200,1200]
randomhour = random.choice(hour)
#losing stamina var
chance = [1,2,2,3,3]
randomchance = random.choice(chance)
#food var
food = ["burger","burger","fruit","fruit","fruit","water","water","water","water","nothing","nothing","nothing","nothing","nothing","stamina boost"]
randomfood = random.choice(food)
#time var
item = ["code sheet 1","code sheet 2","code sheet 3","code sheet 4","code sheet 5","code sheet 6","code descrambler","bottle1","bottle2","bottle3","bottle4","bottle5","bottle6","ladder","key"]
#add stamina boost
randomitem = random.choice(item)
#lives var
lives = 3
lockedcodedescrambler = "Seems like you need a key to open it"
#final code var
colour = ["red","blue","green","yellow","purple","white"]
randomcolour = random.shuffle(colour)
colourbackpack = []


print("You and your friends planned to go to an escape room")
print("But when you arrive to the escape room, none of your friends are to be seen")
print("You are the only one who goes into the escape room")
print("You watch as the door closes and gets locked in front of you")
print("You look behind you and see a sheet of paper")
# print("\nWelcome to the escape room\n")
# print("You hear an announcer through speakers:")
# print("You have 5 hours before you lose because of time")
# time.sleep(2)
# print("You have 50 stamina points so use them wisely")
# time.sleep(2)
# print("You can take a rest and check the clock anytime you want")
# time.sleep(2)
# print("You can check your backpack and guess the code when you are ready")
# time.sleep(2)
# print("When you guess the final code watch out! You only have 3 tries before you lose")
# time.sleep(2)
# print("Hope you have an enjoyable time and Good Luck!")

#while loop to see if they can still play or they lose
print("\nOptions")
print("<1> Search for objects")
print("<2> Search for clues")
print("<3> Check clock")
print("<4> Backpack")
print("<5> Rest")
print("<6> Guess code")


while 0 < timer != 0 and 0 < stamina != 0 and end != True:
    print("")
    userinput = input("What are you going to do (<0> to see options): ")
    print("")
    if userinput == "0":
        print("Options")
        print("<1> Search for objects")
        print("<2> Search for clues")
        print("<3> Check clock")
        print("<4> Backpack")
        print("<5> Rest")
        print("<6> Guess code")
    #if they say 1

    elif userinput == "1":
        #see what was randomly chosen
        if randomchance == 1:
            #gain stamina
            print("You spent",randomhour,"time and found a stamina boost")
            timer -= randomhour
            randomhour = random.choice(hour)
            print("You finish the stamina boost and gain 10 stamina points")
            stamina += 10
            print("You have",stamina,"stamina points left")
            randomchance = random.choice(chance)

        elif randomchance == 2:
            #lose time
            if randomhour == 600:
                print("You searched around for 10 minutes and found nothing. You lost 2 stamina points")
                stamina -= 2
                print("You have",stamina,"stamina points left")
                timer -= randomhour
                randomhour = random.choice(hour)
                print(timer,"time left")
                randomchance = random.choice(chance)                
            elif randomhour == 1200:
                print("You searched around for 20 minutes and found nothing. You lost 4 stamina points")
                stamina -= 4
                print("You have",stamina,"stamina points left")
                timer -= randomhour
                randomhour = random.choice(hour)
                print(timer,"time left")
                randomchance = random.choice(chance)
        elif randomchance == 3:
            #gain stamina and lose time
            if randomfood == "water":
                print("You found water! You gained 1 stamina points")
                stamina += 1
                print("You have",stamina,"stamina points left")
            elif randomfood == "burger":
                print("You have found a burger! You gained 5 stamina points")
                stamina += 10
                print("You have",stamina,"stamina points left")
            elif randomfood == "nothing":
                if randomhour == 600:
                    print("You searched around for food for 10 minutes and found nothing. You lost 5 stamina points")
                    stamina -= 5
                    print("You have",stamina,"stamina points left")
                elif randomhour == 1200:
                    print("You searched around for food for 20 minutes and found nothing. You lost 10 stamina points")
                    stamina -= 10
                    print("You have",stamina,"stamina points left")     
            elif randomfood == "fruit":
                print("You found some fruit! You gained 3 stamina points")
                stamina += 3
                print("You have",stamina,"stamina points left")
            randomchance = random.choice(chance)
    elif userinput == "2":
        #see if they have all the items
        if len(item) == 0:
            print("You have found all the items")
        #find what was randomly chosen
        elif randomitem == "code descrambler":
            if "ladder in first floor" in ladderbackpack:
                print("Using the ladder from the attic, you get the item that was on top of the shelf")
                print("You lost 10 stamina points")
                stamina -= 10
                print("You have",stamina,"stamina points left")
                print("You have found a code descrambler")
                if "code key 1" in keybackpack:
                    print("You use code key 1 to open the code descrambler")
                    print("You see that there are 6 images")
                    print("")
                    print("< >    ( )    [ ]    { }    | |    " "")
                    print("")
                    print("You put the item in your BACKPACK")
                    codedescrambler = ("< >    ( )    [ ]    { }    | |    I I")
                    codedescramblerbackpack.append(codedescrambler)       
                    item.remove("code descrambler")
                else:
                    print("You look and see that there is a lock on the code descrambler")
                    print("Maybe you need a key to open it")
                    print("You put the item in your BACKPACK")
                    lockedcodedescrambler = "Seems like you need a key to open it"
                    codedescramblerbackpack.append(lockedcodedescrambler)
                    item.remove("code descrambler")
            else:
                print("You see a tool that could be useful on escaping but it seems too high")

        elif randomitem == "key":
            print("You found a key!")
            if lockedcodedescrambler in codedescramblerbackpack:
                print("You open the code descrambler using the key!")
                print("You see that there are 6 images")
                print("\n< >    ( )    [ ]    { }    | |    I I\n")
                print("You put the item in your BACKPACK")
                codedescrambler = ("< >    ( )    [ ]    { }    | |    I I")
                codedescramblerbackpack.append(codedescrambler)
                item.remove("key")
                if lockedcodedescrambler in codedescramblerbackpack:
                    codedescramblerbackpack.remove(lockedcodedescrambler)
            else:
                print("Maybe there is a box that could be opened by this key")
                print("You put the key in your BACKPACK")
                keybackpack.append("code key 1")
                item.remove("key")
                randomchance = random.choice(chance)
        elif randomitem == "ladder":
            print("You found a random ladder in the attic")
            print("You leave the ladder in the first floor for later use")
            ladderbackpack.append("ladder in first floor")
            item.remove("ladder")
        elif randomitem == "code sheet 1":
            print("You spent",randomhour,"time and found a code sheet")
            timer -= randomhour
            randomhour = random.choice(hour)
            print("You look at the sheet and see a code")
            print("You lost 3 stamina points")
            stamina -= 3
            print("You have",stamina,"stamina points left")
            print("\n<"+code[0]+">\n")
            print("You put the sheet in your BACKPACK")
            codesheet1 = ("<"+code[0]+">")
            codesheetbackpack.append(codesheet1)
            item.remove("code sheet 1")


        elif randomitem == "code sheet 2":
            print("You spent",randomhour,"time and found a code sheet")
            timer -= randomhour
            randomhour = random.choice(hour)
            print("You found a code sheet")
            print("You look at the sheet and see a code")
            print("You lost 3 stamina points")
            stamina -= 3
            print("You have",stamina,"stamina points left")
            print("\n("+code[1]+")\n")
            print("You put the sheet in your BACKPACK")
            codesheet2 = ("("+code[1]+")")
            codesheetbackpack.append(codesheet2)
            item.remove("code sheet 2")
        
        elif randomitem == "code sheet 3":
            print("You spent",randomhour,"time and found a code sheet")
            timer -= randomhour
            randomhour = random.choice(hour)
            print("You found a code sheet")
            print("You look at the sheet and see a code")
            print("You lost 3 stamina points")
            stamina -= 3
            print("You have",stamina,"stamina points left")
            print("\n["+code[2]+"]\n")
            print("You put the sheet in your BACKPACK")
            codesheet3 = ("["+code[2]+"]")
            codesheetbackpack.append(codesheet3)
            item.remove("code sheet 3")

        elif randomitem == "code sheet 4":
            print("You spent",randomhour,"time and found a code sheet")
            timer -= randomhour
            randomhour = random.choice(hour)
            print("You found a code sheet")
            print("You look at the sheet and see a code")
            print("You lost 3 stamina points")
            stamina -= 3
            print("You have",stamina,"stamina points left")
            print("\n{"+code[3]+"}\n")
            print("You put the sheet in your BACKPACK")
            codesheet4 = ("{"+code[3]+"}")
            codesheetbackpack.append(codesheet4)
            item.remove("code sheet 4")

        elif randomitem == "code sheet 5":
            print("You spent",randomhour,"time and found a code sheet")
            timer -= randomhour
            randomhour = random.choice(hour)
            print("You found a code sheet")
            print("You look at the sheet and see a code")
            print("You lost 3 stamina points")
            stamina -= 3
            print("You have",stamina,"stamina points left")
            print("\n|"+code[4]+"|\n")
            print("You put the sheet in your BACKPACK")
            codesheet5= ("|"+code[4]+"|")
            codesheetbackpack.append(codesheet5)
            item.remove("code sheet 5")

        elif randomitem == "code sheet 6":
            print("You spent",randomhour,"time and found a code sheet")
            timer -= randomhour
            randomhour = random.choice(hour)
            print("You found a code sheet")
            print("You look at the sheet and see a code")
            print("You lost 3 stamina points")
            stamina -= 3
            print("You have",stamina,"stamina points left")
            print("\nI"+code[5]+"I\n")
            print("You put the sheet in your BACKPACK")
            codesheet6= ("I"+code[5]+"I")
            codesheetbackpack.append(codesheet6)
            item.remove("code sheet 6")

        
        elif randomitem == "bottle1":
            print("You spent",randomhour,"and 5 stamina points to find a bottle")
            timer -= randomhour
            randomhour = random.choice(hour)
            stamina -= 5
            print("You have",stamina,"stamina points left")
            print("You found a",colour[0],"bottle")
            print("You find that there is a number on it")
            print("\n",escapecode[0],"\n")
            print("You put the bottle in your BACKPACK")
            bottle1 = escapecode[0],colour[0]
            colourbackpack.append(bottle1)
            item.remove("bottle1")

        elif randomitem == "bottle2":
            print("You spent",randomhour,"and 5 stamina points to find a bottle")
            timer -= randomhour
            randomhour = random.choice(hour)
            stamina -= 5
            print("You have",stamina,"stamina points left")
            print("You found a",colour[1],"bottle")
            print("You find that there is a number on it")
            print("\n",escapecode[1],"\n")
            print("You put the bottle in your BACKPACK")
            bottle2 = escapecode[1],colour[1]
            colourbackpack.append(bottle2)
            item.remove("bottle2")
        
        elif randomitem == "bottle3":
            print("You spent",randomhour,"and 5 stamina points to find a bottle")
            timer -= randomhour
            randomhour = random.choice(hour)
            stamina -= 5
            print("You have",stamina,"stamina points left")
            print("You found a",colour[2],"bottle")
            print("You find that there is a number on it")
            print("\n",escapecode[2],"\n")
            print("You put the bottle in your BACKPACK")
            bottle3 = escapecode[2],colour[2]
            colourbackpack.append(bottle3)
            item.remove("bottle3")

        elif randomitem == "bottle4":
            print("You spent",randomhour,"and 5 stamina points to find a bottle")
            timer -= randomhour
            randomhour = random.choice(hour)
            stamina -= 5
            print("You have",stamina,"stamina points left")
            print("You found a",colour[3],"bottle")
            print("You find that there is a number on it")
            print("\n",escapecode[3],"\n")
            print("You put the bottle in your BACKPACK")
            bottle4 = escapecode[3],colour[3]
            colourbackpack.append(bottle4)
            item.remove("bottle4")

        elif randomitem == "bottle5":
            print("You spent",randomhour,"and 5 stamina points to find a bottle")
            timer -= randomhour
            randomhour = random.choice(hour)
            stamina -= 5
            print("You have",stamina,"stamina points left")
            print("You found a",colour[4],"bottle")
            print("You find that there is a number on it")
            print("\n",escapecode[4],"\n")
            print("You put the bottle in your BACKPACK")
            bottle5 = escapecode[4],colour[4]
            colourbackpack.append(bottle5)
            item.remove("bottle5")
    
        elif randomitem == "bottle6":
            print("You spent",randomhour,"and 5 stamina points to find a bottle")
            timer -= randomhour
            randomhour = random.choice(hour)
            stamina -= 5
            print("You have",stamina,"stamina points left")
            print("You found a",colour[5],"bottle")
            print("You find that there is a number on it")
            print("\n",escapecode[5],"\n")
            print("You put the bottle in your BACKPACK")
            bottle6 = escapecode[5],colour[5]
            colourbackpack.append(bottle6)
            item.remove("bottle6")

        if len(item) > 0:
            randomitem = random.choice(item)

        


    elif userinput == "3":
        print("You have",timer,"time left")
    elif userinput == "4":
        print("You open your backpack . . . \n")
        print("Code sheets:",codesheetbackpack,"\n")
        print("Code descrambler:",codedescramblerbackpack,"\n")
        print("Ladder:",ladderbackpack,"\n")
        print("Keys:",keybackpack,"\n")
        print("Piece of paper in the last room",escapecodebackpack,"\n")
        print("Bottles:",colourbackpack)

    elif userinput == "5":
        print("You spent 1 hour to rest")
        timer -= 3600
        print("You gained 3 stamina")
        stamina += 3
        print("You have",stamina,"stamina points")
        print("You have",timer,"time left")
        



    elif userinput == "6":
        if entry == 1:
            userinput = input("The door has a number lock on it. Enter the code: ")
            if userinput == code:
                print("You have entered the room and see that there is another number lock. You have a feeling that this is the last code")
                print("You find a sheet of paper on the floor")
                print("\n",colour[0],colour[1],colour[2],colour[3],colour[4],colour[5],"\n")
                print("You put the sheet in your BACKPACK")
                colourcode = colour[0],colour[1],colour[2],colour[3],colour[4],colour[5]
                escapecodebackpack.append(colourcode)

                entry = 0
                userinput = int(input("Do you want to leave or guess the final code?(1 to leave, 2 to guess:) "))
                while userinput != 1 and userinput != 2:
                    print("Invalid input!")
                    userinput = int(input("Do you want to leave or guess the final code?(1 to leave, 2 to guess:) "))
                while again == True and userinput == 1 or userinput == 2:
                    if userinput == 1:
                        print("You leave the room noting where it is located")
                        again = False
                    elif userinput == 2:
                        userinput = input("Enter the code: ")
                        if userinput == escapecode:
                            end = True
                        else:
                            if lives != 0:
                                lives -= 1
                                print("Incorrect code! Lost 1 life. You have",lives,"tries left")
                                userinput = int(input("Do you want to leave or guess the final code?(1 to leave, 2 to guess:) "))

                            if lives == 0:
                                print("You ran out of tries")
                                end = True
            else:
                print("Incorrect code")

        elif entry == 0:
            print("You enter the room again")
            userinput = int(input("Do you want to leave or guess the final code?(1 to leave, 2 to guess:) "))
            while userinput != 1 and userinput != 2:
                print("Invalid input")
                userinput = int(input("Do you want to leave or guess the final code?(1 to leave, 2 to guess:) "))
            while again == False and userinput == 1 or userinput == 2:
                if userinput == 1:
                    print("You leave the room noting where it is located")
                    again = True
                elif userinput == 2:
                    userinput = input("Enter the code: ")
                    if userinput == escapecode:
                        end = True
                    else:
                        if lives != 0:
                            lives -= 1
                            print("Incorrect code! Lost 1 life. You have",lives,"tries left")
                            userinput = int(input("Do you want to leave or guess the final code?(1 to leave, 2 to guess:) "))
                        if lives == 0:
                            print("You ran out of tries")
                            end = True
    else:
        print("Invalid action")
if stamina <= 0:
    print("You ran out of stamina")
    print("You get escorted out of the escape room")
    print("You see the escape room fade away as your parents drive you back home")
    print(". . .")
    time.sleep(3)
    print("Thank you for playing")
elif timer <= 0:
    print("You ran out of time")
    print("You get escorted out of the escape room")
    print("You see the escape room fade away as your parents drive you back home")
    print(". . .")
    time.sleep(3)
    print("Thank you for playing")
elif lives == 0:
    print("You get escorted out of the escape room")
    print("You see the escape room fade away as your parents drive you back home")
    print(". . .")
    time.sleep(3)
    print("Thank you for playing")
else:
    print("You got the correct code!")
    print("You get escorted out of the escape room as a winner")
    print("You see the escape room fade away as your parents drive you back home")
    print(". . .")
    time.sleep(3)
    print("Thank you for playing")

